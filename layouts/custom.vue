<template>
  <div v-if=store.Layout>
    <Header @side-show="showSide = true" class="sticky top-0 bg-white" />

    <div class=" fixed top-0 h-full z-20 text-white  bg-zinc-800 rounded-r-xl duration-300 ease-out"
      :class="showSide == true ? 'w-4/5 md:w-1/2 ' : ' w-0'">
      <div class=" flex flex-col text-xl gap-5 border-b-2 border-dashed pb-6 w-5/6 mx-auto"
        :class="showSide ? 'visible' : 'hidden'">
        <close @click="showSide = false" class="h-12 mt-5 w-1/6" />
        <nav>
          <ul class="flex flex-col gap-4">
            <li v-show="useStore().isLogin" @click="showSide = false">
              <NuxtLink to="/user" class="text-white">
                User info
              </NuxtLink>
            </li>
            <li v-show="useStore().isLogin" @click="showSide = false">
              <NuxtLink to="/user/carts" class="text-white">
                Carts
              </NuxtLink>
            </li>
            <li v-show="useStore().isLogin" @click="showSide = false">
              <NuxtLink to="/user/changePermision" class="text-white">
                change permision
              </NuxtLink>
            </li>
            <li v-show="!useStore().isLogin" @click="showSide = false">
              <NuxtLink to="/login" class="text-white">Login</NuxtLink>
            </li>
            <li v-show="!useStore().isLogin" @click="showSide = false">
              <NuxtLink to="/register" class="text-white">Sign up</NuxtLink>
            </li>
            <li @click="showSide = false">
              <NuxtLink to="/create-vebinar" class="text-white">
                <span>Create event</span>
              </NuxtLink>
            </li>
            <li @click="showSide = false">
              <NuxtLink to="/" class="text-white">Events</NuxtLink>
            </li>
            <li @click="showSide = false">
              <NuxtLink to="/organizations" class="text-white">Organizers</NuxtLink>
            </li>
            <li @click="showSide = false">
              <NuxtLink to="/help" class="text-white">Help</NuxtLink>
            </li>
            <li @click="showSide = false">
              <NuxtLink to="/about" class="text-white">About us</NuxtLink>
            </li>
            <li v-show="useStore().isLogin" @click="showSide = false">
              <p class=" text-white" @click="logout()">
                Log out
              </p>
            </li>
          </ul>

        </nav>
      </div>
      <svg xmlns="http://www.w3.org/2000/svg" height="21" class="w-5/6 my-6" viewBox="0 0 168 21" fill="none">
        <path
          d="M9.63859 1.00006C4.37065 1.00006 0.0771861 5.27204 0.0771861 10.5136C0.0771861 12.1936 0.521005 13.8256 1.35075 15.2656L0 20.2L5.06533 18.8752C6.46432 19.6336 8.03698 20.0368 9.63859 20.0368C14.9065 20.0368 19.2 15.7648 19.2 10.5232C19.2 7.97924 18.2062 5.58884 16.402 3.79365C15.5175 2.90462 14.4639 2.19973 13.3026 1.7201C12.1414 1.24047 10.8959 0.995699 9.63859 1.00006ZM9.64824 2.60325C11.7709 2.60325 13.7584 3.42885 15.2635 4.92645C16.0022 5.66118 16.5878 6.53378 16.9868 7.49421C17.3859 8.45463 17.5904 9.48398 17.5887 10.5232C17.5887 14.8816 14.0189 18.424 9.63859 18.424C8.21065 18.424 6.81166 18.0496 5.59598 17.32L5.30653 17.1568L2.29628 17.944L3.09709 15.0256L2.90412 14.7184C2.10712 13.4595 1.68556 12.0015 1.68844 10.5136C1.69809 6.15524 5.25829 2.60325 9.64824 2.60325ZM6.25206 6.11684C6.09769 6.11684 5.83718 6.17444 5.61528 6.41444C5.40301 6.65444 4.77588 7.24004 4.77588 8.40164C4.77588 9.57283 5.63457 10.696 5.7407 10.8592C5.87578 11.0224 7.43879 13.4224 9.8412 14.44C10.4104 14.6992 10.8543 14.8432 11.2016 14.9488C11.7709 15.1312 12.2919 15.1024 12.7067 15.0448C13.1698 14.9776 14.1154 14.4688 14.318 13.912C14.5206 13.3552 14.5206 12.8848 14.4627 12.7792C14.3952 12.6832 14.2408 12.6256 13.9996 12.52C13.7584 12.3856 12.5813 11.8096 12.369 11.7328C12.1471 11.656 12.0121 11.6176 11.8287 11.848C11.6744 12.088 11.2113 12.6256 11.0762 12.7792C10.9315 12.9424 10.7964 12.9616 10.5648 12.8464C10.314 12.7216 9.54211 12.472 8.63517 11.6656C7.9212 11.032 7.44844 10.2544 7.30372 10.0144C7.18794 9.78403 7.29407 9.64003 7.40985 9.53443C7.51598 9.42883 7.67035 9.25603 7.76683 9.11203C7.89226 8.97763 7.93085 8.87203 8.00804 8.71843C8.08523 8.55523 8.04663 8.42083 7.98874 8.30563C7.93085 8.20004 7.44844 7.00964 7.24583 6.53924C7.05286 6.07844 6.8599 6.13604 6.70553 6.12644C6.57045 6.12644 6.41608 6.11684 6.25206 6.11684Z"
          fill="#317A2B"></path>
        <path
          d="M108 1C105.395 1 105.068 1.012 104.044 1.0576C103.02 1.1056 102.323 1.2664 101.712 1.504C101.072 1.74498 100.491 2.12299 100.012 2.6116C99.5237 3.09124 99.1457 3.67149 98.9044 4.312C98.6668 4.9216 98.5048 5.62 98.458 6.64C98.4124 7.666 98.4004 7.9924 98.4004 10.6012C98.4004 13.2076 98.4124 13.534 98.458 14.5576C98.506 15.58 98.6668 16.2772 98.9044 16.888C99.1504 17.5192 99.478 18.0544 100.012 18.5884C100.545 19.1224 101.08 19.4512 101.711 19.696C102.323 19.9336 103.019 20.0956 104.042 20.1424C105.066 20.188 105.393 20.2 108 20.2C110.608 20.2 110.933 20.188 111.958 20.1424C112.979 20.0944 113.679 19.9336 114.29 19.696C114.93 19.4549 115.51 19.0769 115.989 18.5884C116.523 18.0544 116.85 17.5192 117.096 16.888C117.333 16.2772 117.495 15.58 117.543 14.5576C117.588 13.534 117.6 13.2076 117.6 10.6C117.6 7.9924 117.588 7.666 117.543 6.6412C117.495 5.62 117.333 4.9216 117.096 4.312C116.855 3.67147 116.477 3.09121 115.989 2.6116C115.51 2.12281 114.929 1.74477 114.288 1.504C113.676 1.2664 112.978 1.1044 111.957 1.0576C110.932 1.012 110.607 1 107.998 1H108.002H108ZM107.14 2.7304H108.002C110.565 2.7304 110.868 2.7388 111.88 2.7856C112.816 2.8276 113.325 2.9848 113.663 3.1156C114.111 3.2896 114.431 3.4984 114.767 3.8344C115.103 4.1704 115.311 4.4896 115.485 4.9384C115.617 5.2756 115.773 5.7844 115.815 6.7204C115.862 7.732 115.871 8.0356 115.871 10.5976C115.871 13.1596 115.862 13.4644 115.815 14.476C115.773 15.412 115.616 15.9196 115.485 16.258C115.331 16.6748 115.085 17.0517 114.766 17.3608C114.43 17.6968 114.111 17.9044 113.662 18.0784C113.326 18.2104 112.817 18.3664 111.88 18.4096C110.868 18.4552 110.565 18.466 108.002 18.466C105.438 18.466 105.134 18.4552 104.122 18.4096C103.186 18.3664 102.678 18.2104 102.34 18.0784C101.923 17.9247 101.546 17.6795 101.236 17.3608C100.916 17.0512 100.67 16.674 100.516 16.2568C100.385 15.9196 100.228 15.4108 100.186 14.4748C100.14 13.4632 100.131 13.1596 100.131 10.5952C100.131 8.032 100.14 7.7296 100.186 6.718C100.229 5.782 100.385 5.2732 100.517 4.9348C100.691 4.4872 100.9 4.1668 101.236 3.8308C101.572 3.4948 101.891 3.2872 102.34 3.1132C102.678 2.9812 103.186 2.8252 104.122 2.782C105.008 2.7412 105.351 2.7292 107.14 2.728V2.7304ZM113.126 4.324C112.974 4.324 112.825 4.3538 112.685 4.41169C112.545 4.46958 112.418 4.55444 112.311 4.66141C112.204 4.76839 112.119 4.89538 112.061 5.03515C112.003 5.17492 111.974 5.32472 111.974 5.476C111.974 5.62728 112.003 5.77708 112.061 5.91685C112.119 6.05662 112.204 6.18361 112.311 6.29059C112.418 6.39756 112.545 6.48242 112.685 6.54031C112.825 6.5982 112.974 6.628 113.126 6.628C113.431 6.628 113.724 6.50663 113.94 6.29059C114.156 6.07455 114.278 5.78153 114.278 5.476C114.278 5.17047 114.156 4.87745 113.94 4.66141C113.724 4.44537 113.431 4.324 113.126 4.324ZM108.002 5.6704C107.348 5.6602 106.698 5.78018 106.091 6.02337C105.484 6.26656 104.931 6.62809 104.465 7.08691C103.999 7.54573 103.629 8.09268 103.377 8.69591C103.124 9.29914 102.994 9.9466 102.994 10.6006C102.994 11.2546 103.124 11.9021 103.377 12.5053C103.629 13.1085 103.999 13.6555 104.465 14.1143C104.931 14.5731 105.484 14.9346 106.091 15.1778C106.698 15.421 107.348 15.541 108.002 15.5308C109.296 15.5106 110.53 14.9823 111.438 14.0599C112.346 13.1375 112.855 11.895 112.855 10.6006C112.855 9.30619 112.346 8.0637 111.438 7.1413C110.53 6.2189 109.296 5.69059 108.002 5.6704ZM108.002 7.3996C108.85 7.3996 109.664 7.73678 110.265 8.33698C110.865 8.93717 111.202 9.7512 111.202 10.6C111.202 11.4488 110.865 12.2628 110.265 12.863C109.664 13.4632 108.85 13.8004 108.002 13.8004C107.153 13.8004 106.339 13.4632 105.739 12.863C105.138 12.2628 104.801 11.4488 104.801 10.6C104.801 9.7512 105.138 8.93717 105.739 8.33698C106.339 7.73678 107.153 7.3996 108.002 7.3996Z"
          fill="#317A2B"></path>
        <path
          d="M162.96 6.76025L150.48 11.0803L154.8 12.5203M162.96 6.76025L154.8 12.5203M162.96 6.76025L159.12 16.8403L154.8 12.5203"
          stroke="#317A2B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M157.201 20.2C162.503 20.2 166.801 15.9021 166.801 10.6C166.801 5.29792 162.503 1 157.201 1C151.899 1 147.601 5.29792 147.601 10.6C147.601 15.9021 151.899 20.2 157.201 20.2Z"
          stroke="#317A2B" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
        <path
          d="M59.4898 1.02532C58.1162 0.92533 56.7372 1.12226 55.4465 1.60273C54.1559 2.08319 52.9838 2.83593 52.01 3.80976C51.0361 4.78358 50.2834 5.95568 49.8029 7.24635C49.3225 8.53702 49.1255 9.91602 49.2255 11.2896C49.5712 16.3689 54.0072 20.2 59.0961 20.2H62.6392C63.1672 20.2 63.5993 19.7679 63.5993 19.2398C63.5993 18.7117 63.1672 18.2797 62.6392 18.2797H59.1153C55.5339 18.2797 52.2501 15.956 51.3571 12.4898C49.9264 6.92079 55.1114 1.72624 60.6804 3.16651C64.1562 4.04987 66.4798 7.33366 66.4798 10.9151V11.9713C66.4798 12.7298 65.7981 13.4788 65.0396 13.4788C64.281 13.4788 63.5993 12.7298 63.5993 11.9713V10.7711C63.5993 8.36105 61.8902 6.19106 59.509 5.855C58.7514 5.74234 57.9778 5.8123 57.2527 6.05905C56.5276 6.3058 55.8719 6.7222 55.3402 7.27358C54.8086 7.82496 54.4163 8.49536 54.1961 9.22898C53.976 9.9626 53.9342 10.7382 54.0744 11.4912C54.2428 12.3986 54.6693 13.2381 55.3029 13.9091C55.9364 14.5801 56.7501 15.0541 57.6462 15.2743C59.413 15.6872 61.0933 15.1207 62.1975 13.9973C63.052 15.1687 64.7611 15.7832 66.3262 15.1591C67.6129 14.6502 68.4002 13.3348 68.4002 11.9521V10.9055C68.4002 5.80699 64.5691 1.37098 59.4898 1.02532ZM58.7985 13.4788C57.2046 13.4788 55.9179 12.1921 55.9179 10.5983C55.9179 9.00437 57.2046 7.71773 58.7985 7.71773C60.3923 7.71773 61.679 9.00437 61.679 10.5983C61.679 12.1921 60.3923 13.4788 58.7985 13.4788Z"
          fill="#317A2B"></path>
      </svg>
    </div>
    <slot />
    <Footer />
  </div>

  <div v-else>
    <slot />
  </div>
</template>
<script setup>
import { useStore } from '@/stores/index'
import close from '@/components/icons/close.vue'
const store = useStore()
var showSide = ref(false)
var isLogin = ref(false)

onMounted(() => {
  isLogin.value = useStore().isLogin
  showSide.value = false
})

async function logout() {
  localStorage.removeItem('token');
  await navigateTo('/login')
}



</script>
